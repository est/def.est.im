<!DOCTYPE html>
<html>
  <head>
    <title>def: Find the definition for any lookup! - def.est.im</title>
    <link href="/static/css/bootstrap.min.css" rel="stylesheet" media="screen">
    <link href="/static/css/font-awesome.min.css" rel="stylesheet">
    <link href="/static/css/style.css" rel="stylesheet" media="screen">
    <!--[if IE 7]>
    <link href="/static/css/font-awesome-ie7.min.css" rel="stylesheet">
    <![endif]-->
  </head>
  <body>
    <div id="wrap">
      <div class="row container">
        <div id="pageTitle" class="page-header"><h1>def:</h1></div>
        <form class="form-search" action="/">
          <div class="input-append">
            <input name="q" type="text" class="search-query span4" placeholder="Search" x-webkit-speech value="{{ query }}" />
            <button class="btn" type="submit"><span class="icon-search"></span></button>
          </div>
        </form>
        <div class="">
          <div id="content">
            <pre><code>{{ content }}</code></pre>
            <div id="gdictContent">

            </div>
          </div>
        </div>
      </div>

      <div id="push"></div>
    </div>

    <div id="footer">
      <div class="container">
        <p class="muted credit">Created by <a href="http://est.im">est</a>.</p>
      </div>
    </div>

    

    <script src="/static/js/jquery-1.9.0.min.js"></script>
    <script src="/static/js/bootstrap.min.js"></script>
    <script language="javascript"><!--
      var query = "{{ query }}";
      var url = "";
      function showGDict(data, code, msg){
        if(code==200){
          // lastQuery = data;  global var
          // $('#content pre code').text(JSON.stringify(data, null, 4));

          function obj2div(obj){
            var div = document.createElement('DIV');
            for(var item in obj){
              if (obj[item] instanceof Object){
                div.appendChild(arguments.callee(obj[item]) );
              } else if (obj[item] instanceof Array) {
                for(var i=0;i<obj[item].length;i++){
                  div.appendChild( arguments.callee(obj[item]) );
                }
              } else if (item=='text') {
                $(div).text(obj[item])
              } else {
                div.setAttribute(item, obj[item])
              }
            }

            return div
          }
          result=obj2div(data);
          $('#gdictContent').after(result)
        }
      }
    --></script>
    {% if query %}
    <script src="//www.google.com/dictionary/json?callback=showGDict&sl=en&tl=en&restrict=pr,de,sy&q={{query}}"></script>
    {% endif %}
  </body>
</html>